<div style="display: flex; gap: 15px; {% if msg.expediteur == user %}flex-direction: row-reverse;{% endif %}">

    <div style="flex-shrink: 0;">
        {% if msg.expediteur and msg.expediteur.profile_picture %}
            <img src="{{ msg.expediteur.profile_picture.url }}" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
        {% else %}
            <div style="width: 40px; height: 40px; border-radius: 50%; background: #ddd; display: flex; align-items: center; justify-content: center; color: #666;">
                <i class="fas fa-user"></i>
            </div>
        {% endif %}
    </div>

    <div style="max-width: 70%;">
        <div style="font-size: 0.85em; color: #777; margin-bottom: 5px; {% if msg.expediteur == user %}text-align: right;{% endif %}">
        </div>

        <div style="padding: 15px; border-radius: 15px; line-height: 1.5;
            {% if msg.expediteur == user %}
                /* MES MESSAGES (inchangé) : Bleu intense */
                background: var(--couleur-principale); color: white; border-bottom-right-radius: 0;
            {% else %}
                /* MESSAGES DES AUTRES : Rouge pâle (atténué) */
                /* On utilise le code RGB de votre rouge (195, 48, 55) avec une opacité faible (0.12) */
                background: rgba(195, 48, 55, 0.12); color: #333; border-bottom-left-radius: 0;
            {% endif %}
        ">
            {{ msg.contenu|linebreaks }}
        </div>
    </div>
</div>
