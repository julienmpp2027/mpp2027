/* =============================================================================
   1. CONFIGURATION GÉNÉRALE & VARIABLES
   ============================================================================= */
:root {
    --couleur-principale: #1C3047;  /* Bleu Nuit (Fond) */
    --couleur-secondaire: #F0F0F0;  /* Blanc Cassé (Texte & Liens) */
    --couleur-tertiaire: #C33037;   /* Rouge Marianne (Accents) */
}

/* RESET CRUCIAL : Empêche les paddings de faire déborder les éléments */
*, *::before, *::after {
    box-sizing: border-box;
}

body {
    font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: var(--couleur-principale);
    color: #333;
    margin: 0;
    padding: 0;
    line-height: 1.6;
    overflow-x: hidden; /* Sécurité anti-scroll horizontal */
}

/* Conteneur global */
.container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
    width: 100%;
}

/* =============================================================================
   2. NAVBAR (BARRE DE NAVIGATION)
   ============================================================================= */
.navbar {
    background-color: var(--couleur-principale);
    position: sticky; top: 0; z-index: 1000;
    padding: 15px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.navbar-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

/* Logo */
.navbar-left .nav-logo-img { height: 50px; width: auto; display: block; }

/* Liens Centraux */
.navbar-center { display: flex; gap: 25px; }
.navbar-center a {
    color: var(--couleur-secondaire); text-decoration: none;
    font-weight: 500; font-size: 1em; opacity: 0.9; transition: all 0.2s;
}
.navbar-center a:hover { color: var(--couleur-tertiaire); opacity: 1; }

/* Droite (Profil/Icônes) */
.navbar-right { display: flex; align-items: center; gap: 15px; }

.nav-icon-link {
    color: var(--couleur-secondaire); font-size: 1.5em; margin-right: 10px;
    position: relative; display: inline-flex; align-items: center; text-decoration: none;
}
/* Badge Notification */
.nav-badge {
    position: absolute; top: -5px; right: -8px;
    background-color: var(--couleur-tertiaire); color: white;
    font-size: 0.6em; font-weight: bold;
    min-width: 16px; height: 16px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    border: 2px solid var(--couleur-principale);
}

.navbar-profile-link {
    display: flex; align-items: center; text-decoration: none;
    color: var(--couleur-secondaire); font-weight: bold;
}
.navbar-profile-pic, .default-nav-icon {
    width: 35px; height: 35px; border-radius: 50%; object-fit: cover;
    border: 2px solid var(--couleur-secondaire); margin-right: 10px;
}
.default-nav-icon {
    display: flex; align-items: center; justify-content: center;
    background-color: rgba(255, 255, 255, 0.1); color: var(--couleur-secondaire); font-size: 18px;
}

/* Boutons Navbar */
.btn-outline-white {
    background: transparent; border: 1px solid var(--couleur-secondaire);
    color: var(--couleur-secondaire); padding: 8px 15px; border-radius: 50px;
    cursor: pointer; transition: all 0.2s; font-size: 0.9em;
}
.btn-outline-white:hover { background: var(--couleur-secondaire); color: var(--couleur-principale); }

/* =============================================================================
   3. BOUTONS & COMPOSANTS UI (GÉNÉRIQUES)
   ============================================================================= */
.btn-red {
    background: var(--couleur-tertiaire); color: white !important;
    padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: bold;
    transition: transform 0.2s; border: none; cursor: pointer; display: inline-block;
}
.btn-red:hover { transform: translateY(-2px); filter: brightness(90%); }

.btn-white {
    background: var(--couleur-secondaire); color: var(--couleur-principale) !important;
    padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: bold;
    transition: transform 0.2s; border: none; cursor: pointer; display: inline-block;
}
.btn-white:hover { transform: translateY(-2px); filter: brightness(90%); }

.badge { padding: 4px 8px; border-radius: 4px; font-size: 0.75em; font-weight: bold; display: inline-block; }
.badge-green { background: #E6F4EA; color: #1E8E3E; }
.badge-orange { background: #FEF7E0; color: #B06000; }
.badge-blue { background: #E8F0FE; color: #1967D2; }

/* =============================================================================
   4. PAGE D'ACCUEIL (HERO & GRILLES)
   ============================================================================= */
.hero-section {
    display: block; position: relative; width: 100%; max-width: 1400px;
    margin: 40px auto; height: 500px;
    background-image: url('../img/hero_bg.jpg'); background-size: cover; background-position: center;
    border-radius: 20px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4); overflow: hidden;
    transition: transform 0.3s ease;
}
.hero-section:hover { transform: translateY(-3px); filter: brightness(1.1); }
.sr-only { position: absolute; width: 1px; height: 1px; overflow: hidden; opacity: 0; }

.section-title {
    max-width: 1400px; margin: 40px auto 20px auto; padding: 0 20px;
    font-size: 1.5em; color: white; font-weight: bold;
}

.bento-container {
    max-width: 1400px; margin: 0 auto 40px auto; padding: 0 20px;
    display: grid; grid-template-columns: 1.5fr 1fr; gap: 20px; align-items: stretch;
}

/* Cartes Accueil */
.card-featured {
    background: white; border-radius: 15px; overflow: hidden;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1); height: 100%; display: flex; flex-direction: column;
    position: relative; transition: transform 0.3s;
}
.card-featured:hover { transform: translateY(-3px); }
.card-featured-img {
    width: 100%; height: 350px; object-fit: cover;
    -webkit-mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
    mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
    margin-bottom: -100px; z-index: 1;
}
.card-featured-content {
    position: relative; z-index: 2; padding: 0 25px 25px 25px;
    flex-grow: 1; display: flex; flex-direction: column; justify-content: flex-end;
}
.card-featured-content h3 a { color: #1C3047; text-decoration: none; font-size: 1.2em; }
.card-featured-content > a:not(:first-child) { display: none; }

.side-column { display: flex; flex-direction: column; gap: 20px; height: 100%; }
.card-module {
    background: white; border-radius: 15px; overflow: hidden; padding: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: flex; align-items: center;
    flex: 1; min-height: 0; transition: transform 0.3s;
}
.card-module:hover { transform: translateY(-3px); }
.card-module.blue-gradient { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; }
.card-module a { display: flex; width: 100%; height: 100%; align-items: center; gap: 15px; text-decoration: none; color: inherit; }
.card-module h4 { margin: 0 0 5px 0; font-size: 1em; }
.card-module p { margin: 0; font-size: 0.9em; opacity: 0.8; }
.card-module i.fa-arrow-right { display: none; }

.bottom-grid {
    max-width: 1400px; margin: 0 auto 60px auto; padding: 0 20px;
    display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;
}
.card-small {
    background: white; border-radius: 15px; padding: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 15px;
    overflow: hidden; transition: transform 0.2s; text-decoration: none; color: #333;
}
.card-small:hover { transform: translateY(-3px); }
.card-icon { font-size: 2em; color: var(--couleur-principale); flex-shrink: 0; }

/* =============================================================================
   5. PAGE ARTICLE & PROFIL (LAYOUT COMMUN)
   ============================================================================= */
/* Carte d'en-tête sombre */
.profile-header-card {
    max-width: 1400px; margin: 40px auto 30px auto; padding: 0 20px; width: 100%;
}
/* On crée une boîte interne pour le fond */
.profile-header-card > div { /* Cible le contenu interne si besoin, ou applique style directement */
    background: rgba(30, 45, 70, 0.6); border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}
.profile-header-content { display: flex; align-items: center; gap: 30px; flex-wrap: wrap; }

/* Layout 2 colonnes */
.profile-layout, .article-layout {
    display: grid; grid-template-columns: 2.5fr 1fr; gap: 40px;
    max-width: 1400px; margin: 0 auto 60px auto; padding: 0 20px;
    align-items: start;
}

/* Cartes Blanches (Dashboard) */
.dashboard-card {
    background: var(--couleur-secondaire); border-radius: 10px; padding: 20px;
    margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); color: #333;
}

/* Sidebar Sticky */
.article-sidebar, .profile-sidebar {
    display: flex; flex-direction: column; gap: 20px;
    position: sticky; top: 20px;
    max-height: calc(100vh - 40px); overflow-y: auto;
    scrollbar-width: thin; scrollbar-color: rgba(255,255,255,0.2) transparent;
}

/* Widgets Sidebar */
.sidebar-widget, .stats-card {
    background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 20px; border-radius: 15px; flex-shrink: 0;
}
.sidebar-widget h4, .stats-card h4 {
    color: white; border-bottom: 2px solid var(--couleur-tertiaire); padding-bottom: 10px;
    margin-top: 0; margin-bottom: 15px; font-size: 1.1em; text-transform: uppercase;
}
.sidebar-widget a { color: white !important; text-decoration: none; }

/* Contenu Article */
.article-banner-img { width: 100%; height: auto; border-radius: 15px; margin-bottom: 30px; }
.article-title { font-size: 2.5em; color: white; font-weight: 800; text-transform: uppercase; margin-bottom: 10px; }
.article-meta { color: rgba(255,255,255,0.6); margin-bottom: 30px; display: flex; gap: 15px; }
.article-content { font-size: 1.15em; line-height: 1.8; color: rgba(255,255,255,0.9); }
.article-content h2 { color: white; margin-top: 40px; border-left: 4px solid var(--couleur-tertiaire); padding-left: 15px; }

/* Commentaires */
.commentaires-section {
    background: rgba(20, 30, 45, 0.8); border-radius: 15px; padding: 30px; margin-top: 40px;
}
.commentaires-section h3 { color: white !important; margin-top: 0; }
.comment-list { max-height: 600px; overflow-y: auto; padding-right: 10px; margin-bottom: 20px; }
.comment-item { display: flex; gap: 20px; margin-bottom: 20px; }
.comment-avatar { width: 50px; height: 50px; flex-shrink: 0; position: relative; z-index: 10; }
.comment-author-link img, .default-avatar {
    width: 50px; height: 50px; border-radius: 50%; object-fit: cover; display: flex; align-items: center; justify-content: center;
    border: 2px solid rgba(255,255,255,0.1); background: var(--couleur-principale); color: rgba(255,255,255,0.5); font-size: 1.5em;
    transition: all 0.2s;
}
.comment-author-link:hover { transform: scale(1.2); z-index: 9999 !important; position: relative; }
.comment-body {
    background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 0 15px 15px 15px;
    color: rgba(255, 255, 255, 0.9); flex-grow: 1; position: relative; z-index: 1;
}

/* =============================================================================
   6. FORMULAIRES (LOGIN, REGISTER, CONTACT)
   ============================================================================= */
.auth-layout { max-width: 500px; margin: 60px auto; padding: 0 20px; width: 100%; }
.form-group { margin-bottom: 20px; }
.form-group label { display: block; font-weight: 700; margin-bottom: 8px; color: var(--couleur-principale); }

/* Inputs Standards */
.form-group input[type="text"],
.form-group input[type="email"],
.form-group input[type="password"],
.form-group select {
    width: 100%; height: 50px; padding: 0 15px;
    border: 2px solid #e0e0e0; border-radius: 8px;
    font-size: 1em; color: #333; background: #fff;
    transition: border-color 0.3s;
}
.form-group input:focus, .form-group select:focus { border-color: var(--couleur-principale); outline: none; }

/* Textareas */
.form-group textarea, .comment-form textarea {
    width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px;
    font-size: 1em; font-family: inherit; min-height: 120px; resize: none;
}

/* Upload */
.photo-upload-widget {
    display: flex; align-items: center; gap: 20px; padding: 20px;
    background: rgba(28, 48, 71, 0.05); border-radius: 10px; border: 2px dashed #ccc;
}
.upload-field-container input[type="file"]::file-selector-button {
    background: var(--couleur-secondaire); border: 1px solid #ccc; padding: 8px 15px;
    border-radius: 5px; cursor: pointer; font-weight: 600; margin-right: 10px;
}

/* =============================================================================
   7. MESSAGERIE (INBOX)
   ============================================================================= */
.mailbox-list { display: flex; flex-direction: column; gap: 10px; }
.mailbox-item {
    display: flex; align-items: center; background: var(--couleur-secondaire); padding: 15px;
    border-radius: 8px; text-decoration: none; color: #333; transition: transform 0.2s;
}
.mailbox-item:hover { transform: translateX(5px); background: white; }
.mailbox-item.unread { background: white; border-left: 5px solid var(--couleur-tertiaire); }
.mail-content-col { flex: 1; min-width: 0; padding: 0 15px; }
.mail-subject { font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* =============================================================================
   8. FOOTER
   ============================================================================= */
.main-footer {
    background-color: var(--couleur-principale); border-top: 1px solid rgba(255,255,255,0.1);
    padding: 30px 0; margin-top: 60px; font-size: 0.95em;
}
.footer-content {
    max-width: 1400px; margin: 0 auto; padding: 0 20px;
    display: flex; justify-content: space-between; align-items: center;
}
.footer-links { display: flex; gap: 20px; }
.footer-links a { color: rgba(255,255,255,0.6); text-decoration: none; }
.footer-links a:hover { color: white; }
.footer-socials { display: flex; gap: 20px; }
.footer-socials a { color: rgba(255,255,255,0.6); font-size: 1.2em; }
.footer-socials a:hover { color: white; }

/* =============================================================================
   9. RESPONSIVE (MOBILE & TABLETTE) - LE GROS CORRECTIF
   ============================================================================= */

/* Éléments mobiles cachés sur PC */
.mobile-menu-toggle, .mobile-only-logout, .mobile-only-link { display: none; }

@media (max-width: 900px) {

    /* --- NAVBAR MOBILE --- */
    .navbar-container { justify-content: space-between; position: relative; }
    .mobile-menu-toggle { display: block; font-size: 1.8em; color: white; cursor: pointer; order: 3; }

    .navbar-center {
        display: none; /* Caché par défaut */
        position: absolute; top: 100%; left: 0; width: 100%;
        background: var(--couleur-principale); flex-direction: column;
        padding: 10px 0; border-top: 1px solid rgba(255,255,255,0.1); margin: 0; gap: 0;
        box-shadow: 0 10px 20px rgba(0,0,0,0.5);
    }
    .navbar-center.active { display: flex; }
    .navbar-center a, .mobile-only-logout button {
        display: block; padding: 15px; text-align: center; width: 100%;
        border-bottom: 1px solid rgba(255,255,255,0.05); color: white;
    }

    /* On cache les éléments PC */
    .desktop-only { display: none !important; }
    .mobile-only-logout, .mobile-only-link { display: block; }
    .navbar-right { margin-left: auto; gap: 15px; order: 2; }

    /* --- GRILLES ET LAYOUTS (TOUT EN 1 COLONNE) --- */
    .bento-container, .bottom-grid, .article-layout, .profile-layout {
        grid-template-columns: 1fr !important;
        gap: 20px;
    }

    /* Marges latérales pour ne pas coller aux bords */
    .container, .bento-container, .bottom-grid, .article-layout, .profile-header-card {
        padding-left: 15px; padding-right: 15px; width: 100%;
    }

    /* Bannière Hero */
    .hero-section { height: auto; aspect-ratio: 16/9; margin: 20px auto; border-radius: 15px; }

    /* Cartes */
    .card-featured-img { height: 200px; }
    .profile-header-card > div { padding: 20px; }

    /* Sidebar Mobile (plus de sticky) */
    .article-sidebar, .profile-sidebar { position: static; height: auto; overflow: visible; }

    /* Footer Mobile */
    .footer-content { flex-direction: column; gap: 15px; text-align: center; }
    .footer-links { flex-direction: column; gap: 10px; }
    .separator-dot { display: none; }
}